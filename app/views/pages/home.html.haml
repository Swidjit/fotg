-content_for :head do
  %title Good Luck Test
  %meta{:content => "Test Your Luck", :property => "og:title"}
  %meta{:content => "Good Luck", :property => "og:site_name"}
  %meta{:content => "Take an hourly luck test and see how you luck compares to people across the world.", :property => "og:description"}
  %meta{:content => 'Good Luck Test', :property => "title"}
  %meta{:property => "description", :content => 'Is it your lucky day?  Is your overall luck good or bad? Test your luck with these fun quick games and see how lucky you are compared to others across the world. '}
  %meta{:property => 'keywords', :content => 'luck,lucky,good,test,day,exam,how,game,press,lottery,play, competition'}
.row
  .large-12.columns
    %p FreeOnlineTypingGames.com aka The Keyboard Playground is home to a huge collection of online typing games, WPM typing tests, a typing tutor, and other free typing resources to help you improve your keyboarding skills.  Practicing typing has never been so fun!
.row
  .large-8.columns
    %h4 FOTG Original Games
    -@games.each do |game|
      =render :partial => 'games/game_logo', :locals => {game:game}
  .large-4.columns
    %script{:async => "", :src => "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"}
      / fotg home page
      %ins.adsbygoogle{"data-ad-client" => "ca-pub-1203319491225179", "data-ad-format" => "auto", "data-ad-slot" => "7811520627", :style => "display:block"}
      :javascript
        (adsbygoogle = window.adsbygoogle || []).push({});
.row{:style => "margin-top: 15px;"}
  .large-8.columns
    %h4 Other Typing Games
    -@other_games.each do |game|
      =render :partial => 'games/other_game_logo', :locals => {game:game}
  .large-4.columns
    %h5 Site News
    %p FOTG will be undergoing a major upgrade during the summer of 2015.  The new site won't be fully complete for a couple months, but have started this process now with a new design that is faster and mobile-friendly.  New games and features will be added throughout the summer!
.row{:style => "margin-top: 15px;"}
  .large-8.columns
    %h4 Kids Typing Games
    -@kids_games.each do |game|
      =render :partial => 'games/other_game_logo', :locals => {game:game}
  .large-4.columns
    %h5 Typing Resources

:javascript
  $(document).on('ready page:load', function(){
      var start_time, end_time;
      var started = false;
      $('input#entry').focus();
      $('input#entry').bind("cut copy paste",function(e) {
          e.preventDefault();
      });
      $('input#entry').on("keyup", function(event) {
        if(!started) {
          started = true;
          start_time = new Date().getTime();
          Example1.Timer.play();
        }

        var keycode = (event.keyCode ? event.keyCode : event.which);
        if($(this).val() == $.trim($('#target-text').text())) {
          //ok, its a match
          length = Example1.getTime();
          Example1.Timer.stop();

        }
        if(keycode == '13'){
          //you submitted it
          $('input#entry').prop('disabled', true);
          length = Example1.getTime();
          Example1.Timer.stop();

          //calculate wpm
          end_time = new Date().getTime();
          elapsed_time = (end_time-start_time)/60000;
          console.log(elapsed_time);
          wpm = ($(this).val().length/5)/elapsed_time;
          $('#wpm').text(wpm.toFixed(2));

          //count errors
          errors = 0;
          txt = $(this).val();
          target = $.trim($('#target-text').text());
          for (var i = 0, len = txt.length; i < len; i++) {
            if(txt[i]==target[i]) {
               // do nothing
            }
            else {
              errors++;
            }
          }
          $('#errors').text(errors);
        }
        showTextErrors($(this).val());
      });

      function showTextErrors(txt) {
        html = "";
        target = $.trim($('#target-text').text());
        for (var i = 0, len = txt.length; i < len; i++) {
          if(txt[i]==target[i]) {
             html += "<span>" + txt[i] + "</span>";
          }
          else {
            html += "<span style='color:red'>" + target[i] + "</span>";
          }
        }

        $('#output-text').html(html);
      }
  });
  var Example1 = new (function() {
    var $stopwatch, // Stopwatch element on the page
        incrementTime = 70, // Timer speed in milliseconds
        currentTime = 0, // Current time in hundredths of a second
        updateTimer = function() {
            $stopwatch.html(formatTime(currentTime));
            currentTime += incrementTime / 10;
        },
        init = function() {
            $stopwatch = $('#stopwatch');
            Example1.Timer = $.timer(updateTimer, incrementTime, false);
        };
    this.getTime = function() {
        return currentTime;
      };
    this.resetStopwatch = function() {
        currentTime = 0;
        this.Timer.stop().once();
    };
    $(init);
  });
  function pad(number, length) {
      var str = '' + number;
      while (str.length < length) {str = '0' + str;}
      return str;
  }
  function formatTime(time) {
      var min = parseInt(time / 6000),
          sec = parseInt(time / 100) - (min * 60),
          hundredths = pad(time - (sec * 100) - (min * 6000), 2);
      return (min > 0 ? pad(min, 2) : "00") + ":" + pad(sec, 2) + ":" + hundredths;
  }